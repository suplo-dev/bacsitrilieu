import{X as E,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-D5fRYRpi.js";import{d as L,L as $,C as B,h as P,c as S,a as u,o as m,e as o,u as e,m as j,w as r,b as a,g as n,q as f,t as g,F as R,W}from"./app-DXM_5gjp.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-HbXdWgI5.js";import{_ as k,T as q}from"./Button.vue_vue_type_script_setup_true_lang-CmZQE_U0.js";import{C as G}from"./Combobox-C_mSt8pQ.js";import{E as H}from"./Editor-8SBJg9zk.js";import{I as _}from"./Input-CgKPg3Bw.js";import{N as M}from"./notebook-pen-BQDZiImY.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-BrkUpmhH.js";import"./useForwardExpose-BVGaJAeB.js";import"./Collection-DyNMLx78.js";import"./DismissableLayer-trlUGpru.js";import"./RovingFocusGroup-DIgVrLxi.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BSvuZiEA.js";import"./chevron-down-Bs08XWEm.js";import"./Input.vue_vue_type_style_index_0_scoped_2b5882b8_lang-CqKhcLmW.js";const Q={class:"flex flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"grid gap-4 md:grid-cols-6"},J={class:"col-span-5"},K={key:0,class:"text-sm mt-2 text-red-500"},Y={class:"col-span-5 relative"},Z={class:"relative w-64 mt-2"},ee=["src"],te={class:"col-span-5"},se={key:0,class:"text-sm mt-2 text-red-500"},oe={class:"col-span-5"},le={key:0,class:"text-sm mt-2 text-red-500"},ae={class:"col-span-5"},re={key:0,class:"text-sm mt-2 text-red-500"},ne={class:"col-span-5"},ie={class:"col-start-5 col-span-2 space-x-2 ms-auto"},b="thumbnails/default.jpg",de=L({__name:"edit",props:{post:Object,categories:Array,users:Array},setup(h){const C=[{title:"Trang chủ",href:route("dashboard")},{title:"Quản lý bài viết",href:route("admin.posts.index")},{title:"Chỉnh sửa bài viết",href:"#"}],i=h;console.log($().props);const s=B({category_id:i.post.category_id,thumbnail:null,title:i.post.title,slug:i.post.slug,body:i.post.body,delete_thumbnail:!1,fake_view:i.post.fake_view}),V=i.post.thumbnail_url||b,c=P(null),v=S(()=>c.value?c.value:s.delete_thumbnail?b:V),N=d=>{var x;const l=((x=d.target.files)==null?void 0:x[0])??null;if(s.thumbnail=l,s.delete_thumbnail=!1,l){const y=new FileReader;y.onload=A=>{var w;c.value=(w=A.target)==null?void 0:w.result},y.readAsDataURL(l)}},T=()=>{c.value?(s.thumbnail=null,c.value=null):s.delete_thumbnail||(s.delete_thumbnail=!0)},F=d=>d.normalize("NFD").replace(/[̀-ͯ]/g,"").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),U=d=>{s.slug=F(d.target.value)},D=()=>{s.post(route("admin.posts.update",i.post.id),{preserveScroll:!0,forceFormData:!0})},I=()=>{W.get(route("admin.posts.index"))};return(d,t)=>(m(),u(R,null,[o(e(j),{title:"Chỉnh sửa bài viết"}),o(z,{breadcrumbs:C},{default:r(()=>[a("div",Q,[t[13]||(t[13]=a("h3",{class:"text-2xl"},"Chỉnh sửa bài viết",-1)),a("div",X,[o(e(p),{class:"content-center"},{default:r(()=>t[5]||(t[5]=[n("Danh mục")])),_:1}),a("div",J,[o(e(G),{modelValue:e(s).category_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).category_id=l),options:h.categories,placeholder:"-- Chọn danh mục --"},null,8,["modelValue","options"]),e(s).errors.category_id?(m(),u("p",K,g(e(s).errors.category_id),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[6]||(t[6]=[n("Ảnh bìa")])),_:1}),a("div",Y,[a("input",{type:"file",name:"thumbnail",accept:"image/*",onChange:N},null,32),a("div",Z,[a("img",{src:d.$img(v.value),alt:"Thumbnail",class:"rounded-md shadow w-full h-auto"},null,8,ee),v.value!==b?(m(),u("button",{key:0,onClick:T,type:"button",class:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full hover:bg-red-600"},[o(e(E),{class:"w-4 h-4"})])):f("",!0)])]),o(e(p),{class:"content-center"},{default:r(()=>t[7]||(t[7]=[n("Tiêu đề")])),_:1}),a("div",te,[o(e(_),{modelValue:e(s).title,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).title=l),type:"text",placeholder:"Nhập tiêu đề bài viết",onInput:U},null,8,["modelValue"]),e(s).errors.title?(m(),u("p",se,g(e(s).errors.title),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[8]||(t[8]=[n("Slug")])),_:1}),a("div",oe,[o(e(_),{modelValue:e(s).slug,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).slug=l),type:"text",placeholder:"Nhập slug"},null,8,["modelValue"]),e(s).errors.slug?(m(),u("p",le,g(e(s).errors.slug),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[9]||(t[9]=[n("Fake view")])),_:1}),a("div",ae,[o(e(_),{modelValue:e(s).fake_view,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).fake_view=l),type:"text",placeholder:"Nhập fake view"},null,8,["modelValue"]),e(s).errors.fake_view?(m(),u("p",re,g(e(s).errors.fake_view),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[10]||(t[10]=[n("Nội dung")])),_:1}),a("div",ne,[o(e(H),{modelValue:e(s).body,"onUpdate:modelValue":t[4]||(t[4]=l=>e(s).body=l)},null,8,["modelValue"])]),a("div",ie,[o(e(k),{onClick:D,disabled:e(s).processing},{default:r(()=>[o(e(M),{class:"size-4 text-white"}),t[11]||(t[11]=n(" Cập nhật "))]),_:1},8,["disabled"]),o(e(k),{variant:"destructive",onClick:I},{default:r(()=>[o(e(q),{class:"size-4 text-white"}),t[12]||(t[12]=n(" Huỷ bỏ "))]),_:1})])])])]),_:1})],64))}}),Te=O(de,[["__scopeId","data-v-7060bc7a"]]);export{Te as default};
