import{X as E,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CK6aNKyL.js";import{d as $,C as B,h as L,c as P,a as u,o as m,e as o,u as e,m as S,w as r,b as a,g as n,s as f,t as g,F as j,W as R}from"./app-BxndJIPy.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-Bk4hQUGL.js";import{_ as k,T as W}from"./Button.vue_vue_type_script_setup_true_lang-XsB1hFle.js";import{C as G}from"./Combobox-D0_i76PG.js";import{E as H}from"./Editor-CZNRixR1.js";import{I as _}from"./Input-uRyYeM3b.js";import{N as M}from"./notebook-pen-CacXGMdR.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-BCO0cNfy.js";import"./useForwardExpose-DcT_7aFj.js";import"./Collection-BmDBTRJs.js";import"./DismissableLayer-CJ1HtnYK.js";import"./RovingFocusGroup-B742TL2Q.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnTFAO9c.js";import"./chevron-down-DKPUwqfw.js";import"./Input.vue_vue_type_style_index_0_scoped_2b5882b8_lang-B68C-t20.js";const Q={class:"flex flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"grid gap-4 md:grid-cols-6"},q={class:"col-span-5"},J={key:0,class:"text-sm mt-2 text-red-500"},K={class:"col-span-5 relative"},Y={class:"relative w-64 mt-2"},Z=["src"],ee={class:"col-span-5"},te={key:0,class:"text-sm mt-2 text-red-500"},se={class:"col-span-5"},oe={key:0,class:"text-sm mt-2 text-red-500"},le={class:"col-span-5"},ae={key:0,class:"text-sm mt-2 text-red-500"},re={class:"col-span-5"},ne={class:"col-start-5 col-span-2 space-x-2 ms-auto"},b="thumbnails/default.jpg",ie=$({__name:"edit",props:{post:Object,categories:Array,users:Array},setup(h){const C=[{title:"Trang chủ",href:route("dashboard")},{title:"Quản lý bài viết",href:route("admin.posts.index")},{title:"Chỉnh sửa bài viết",href:"#"}],i=h,s=B({category_id:i.post.category_id,thumbnail:null,title:i.post.title,slug:i.post.slug,body:i.post.body,delete_thumbnail:!1,fake_view:i.post.fake_view}),V=i.post.thumbnail_url||b,c=L(null),v=P(()=>c.value?c.value:s.delete_thumbnail?b:V),N=d=>{var x;const l=((x=d.target.files)==null?void 0:x[0])??null;if(s.thumbnail=l,s.delete_thumbnail=!1,l){const y=new FileReader;y.onload=A=>{var w;c.value=(w=A.target)==null?void 0:w.result},y.readAsDataURL(l)}},T=()=>{c.value?(s.thumbnail=null,c.value=null):s.delete_thumbnail||(s.delete_thumbnail=!0)},F=d=>d.normalize("NFD").replace(/[̀-ͯ]/g,"").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),U=d=>{s.slug=F(d.target.value)},D=()=>{s.post(route("admin.posts.update",i.post.id),{preserveScroll:!0,forceFormData:!0})},I=()=>{R.get(route("admin.posts.index"))};return(d,t)=>(m(),u(j,null,[o(e(S),{title:"Chỉnh sửa bài viết"}),o(z,{breadcrumbs:C},{default:r(()=>[a("div",Q,[t[13]||(t[13]=a("h3",{class:"text-2xl"},"Chỉnh sửa bài viết",-1)),a("div",X,[o(e(p),{class:"content-center"},{default:r(()=>t[5]||(t[5]=[n("Danh mục")])),_:1}),a("div",q,[o(e(G),{modelValue:e(s).category_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).category_id=l),options:h.categories,placeholder:"-- Chọn danh mục --"},null,8,["modelValue","options"]),e(s).errors.category_id?(m(),u("p",J,g(e(s).errors.category_id),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[6]||(t[6]=[n("Ảnh bìa")])),_:1}),a("div",K,[a("input",{type:"file",name:"thumbnail",accept:"image/*",onChange:N},null,32),a("div",Y,[a("img",{src:d.$img(v.value),alt:"Thumbnail",class:"rounded-md shadow w-full h-auto"},null,8,Z),v.value!==b?(m(),u("button",{key:0,onClick:T,type:"button",class:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full hover:bg-red-600"},[o(e(E),{class:"w-4 h-4"})])):f("",!0)])]),o(e(p),{class:"content-center"},{default:r(()=>t[7]||(t[7]=[n("Tiêu đề")])),_:1}),a("div",ee,[o(e(_),{modelValue:e(s).title,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).title=l),type:"text",placeholder:"Nhập tiêu đề bài viết",onInput:U},null,8,["modelValue"]),e(s).errors.title?(m(),u("p",te,g(e(s).errors.title),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[8]||(t[8]=[n("Slug")])),_:1}),a("div",se,[o(e(_),{modelValue:e(s).slug,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).slug=l),type:"text",placeholder:"Nhập slug"},null,8,["modelValue"]),e(s).errors.slug?(m(),u("p",oe,g(e(s).errors.slug),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[9]||(t[9]=[n("Fake view")])),_:1}),a("div",le,[o(e(_),{modelValue:e(s).fake_view,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).fake_view=l),type:"text",placeholder:"Nhập fake view"},null,8,["modelValue"]),e(s).errors.fake_view?(m(),u("p",ae,g(e(s).errors.fake_view),1)):f("",!0)]),o(e(p),{class:"content-center"},{default:r(()=>t[10]||(t[10]=[n("Nội dung")])),_:1}),a("div",re,[o(e(H),{modelValue:e(s).body,"onUpdate:modelValue":t[4]||(t[4]=l=>e(s).body=l)},null,8,["modelValue"])]),a("div",ne,[o(e(k),{onClick:D,disabled:e(s).processing},{default:r(()=>[o(e(M),{class:"size-4 text-white"}),t[11]||(t[11]=n(" Cập nhật "))]),_:1},8,["disabled"]),o(e(k),{variant:"destructive",onClick:I},{default:r(()=>[o(e(W),{class:"size-4 text-white"}),t[12]||(t[12]=n(" Huỷ bỏ "))]),_:1})])])])]),_:1})],64))}}),Ne=O(ie,[["__scopeId","data-v-a4cb18e6"]]);export{Ne as default};
